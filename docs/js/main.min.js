"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}$(document).ready(function(){new Validator({idEmail:"validate-email"})});var Validator=function(){function t(e){_classCallCheck(this,t),this.mailboxlayer={url:"http://apilayer.net/api/check",key:"c6f315c07bca4e3ab5a6fd8fca2b6c58"},this.checkIdEmail(e)}return _createClass(t,[{key:"checkIdEmail",value:function(e){var t=this;return"idEmail"in e&&(this.emailForm=$("#"+e.idEmail),0!==this.emailForm.length&&this.emailForm.keypress(function(e){if(13===e.which)return e.preventDefault(),t.checkIt(),!0})),!1}},{key:"notEmpty",value:function(e){return""!==e}},{key:"isValid",value:function(e){var r=this;return new Promise(function(t,i){$.get(r.mailboxlayer.url,{access_key:r.mailboxlayer.key,email:e,smtp:1,format:1}).done(function(e){"format_valid"in e&&"smtp_check"in e&&t(e.format_valid&&e.smtp_check),"success"in e&&(e.success||i(e.error.info))}).fail(function(e){i(e.statusText)})})}},{key:"checkIt",value:function(){var t=this,e=this.emailForm.val().trim();this.notEmpty(e)?this.isValid(e).then(function(e){e?t.showSuccess("Email корректен и существует!"):t.showError("Email не прошёл проверку!")},function(e){t.showError(e)}):this.showError("Поле Email пустое!")}},{key:"showError",value:function(e){Swal.fire({title:"Ошибка!",text:e,type:"error",confirmButtonText:"Ok",heightAuto:!1,confirmButtonColor:"#76b852"})}},{key:"showSuccess",value:function(e){Swal.fire({title:"Успешно!",text:e,type:"success",confirmButtonText:"Ok",heightAuto:!1,confirmButtonColor:"#76b852"})}}]),t}();